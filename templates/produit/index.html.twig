{% extends 'base.html.twig' %}

{% block title %}Produit index{% endblock %}

{% block body %}
    <div class="card card-h-10 mt-1">
        <div class="card-body table-responsive">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Liste produits</h3>
                <div class="dropdown">
                    <a class="btn btn-primary" href="{{ path('app_produit_new') }}">Ajouter produit</a>
                </div>
            </div>

            <form method="get" action="{{ path('app_produit_index') }}" class="form-container mb-3">
                <div class="form-row">
                    <div class="col">
                        <input type="text" name="codeprod" value="{{ app.request.query.get('codeprod') }}" class="form-control" placeholder="Code Produit">
                    </div>
                    <div class="col">
                        <input type="text" name="libprod" value="{{ app.request.query.get('libprod') }}" class="form-control" placeholder="Libellé Produit">
                    </div>
                    <div class="col">
                        <select name="pays" class="form-control">
                            <option value="">-- Sélectionner un pays --</option>
                            {% for pays in paysList %}
                                <option value="{{ pays.IDPAYS }}" {% if app.request.query.get('pays') == pays.IDPAYS %}selected{% endif %}>
                                    {{ pays.LIBPAYS }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col">
                        <button type="submit" class="btn btn-success">Filtrer</button>
                    </div>
                </div>
            </form>

            <table id="basic-datatable" class="table">
                <thead>
                <tr>
                    <th>SEQPROD</th>
                    <th>LIBPROD</th>
                    <th>ADRESSE</th>
                    <th>TEL</th>
                    <th>EMAIL</th>
                    <th>Pays</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for produit in produits %}
                    <tr>
                        <td>{{ produit.SEQPROD }}</td>
                        <td>{{ produit.LIBPROD }}</td>
                        <td>{{ produit.ADRESSE }}</td>
                        <td>{{ produit.TEL }}</td>
                        <td>{{ produit.EMAIL }}</td>
                        <td>{{ produit.IDPAYS.LIBPAYS }}</td>
                        <td>
                            <a href="{{ path('app_produit_show', {'SEQPROD': produit.SEQPROD}) }}">show</a>
                            <a href="{{ path('app_produit_edit', {'SEQPROD': produit.SEQPROD}) }}">edit</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7">No records found</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
